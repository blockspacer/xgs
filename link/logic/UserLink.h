//------------------------------------------------------------------------
// * @filename: UserLink.h
// *
// * @brief: 用户连接
// *
// * @author: XGM
// * @date: 2018/12/27
//------------------------------------------------------------------------
#pragma once

#include <stdint.h>

#include "common/net/NetHeartbeat.h"

class UserLink
{
public:
	UserLink();
	virtual ~UserLink();
public:
	//------------------------------------------------------------------------
	// 初始化
	//------------------------------------------------------------------------
	virtual void Init(int64_t nUserID, int64_t nSessionID);

	//------------------------------------------------------------------------
	// 重连
	//------------------------------------------------------------------------
	virtual void Reconnect(int64_t nSessionID);

	//------------------------------------------------------------------------
	// 断开连接
	//------------------------------------------------------------------------
	virtual void OnDisconnect();

	//------------------------------------------------------------------------
	// 获取UserID
	//------------------------------------------------------------------------
	int64_t GetUserID() { return m_nUserID; }

	//------------------------------------------------------------------------
	// 获取用户连接ID
	//------------------------------------------------------------------------
	int64_t GetSessionID() { return m_nSessionID; }

	//------------------------------------------------------------------------
	// 获得网络心跳数据
	//------------------------------------------------------------------------
	NetHeartbeat& GetNetHeartbeat() { return m_Heartbeat; }

	//------------------------------------------------------------------------
	// 检测网络心跳
	//------------------------------------------------------------------------
	virtual bool CheckHeartbeat(int64_t nNow);

private:
	// UserID
	int64_t m_nUserID = 0;

	// 连接ID
	int64_t m_nSessionID = 0;

	// 网络心跳数据
	NetHeartbeat m_Heartbeat;
};
